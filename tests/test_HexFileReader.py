import pytest
from pathlib import Path
from picpro.HexFileReader import HexFileReader


def test_be_constructed_with(hex_file_path: Path) -> None:
    HexFileReader(hex_file_path)


def test_not_file() -> None:
    with pytest.raises(FileNotFoundError):
        HexFileReader(Path('Muhehe'))


def test_records(hex_file_reader: HexFileReader) -> None:
    expected = [
        (0, b'\x0f('),
        (8, b'\xa0\x00\x03\x08\xa1\x00\x83\x12'),
        (16, b'\x0c\x18w(!\x08\x83\x00\xa0\x0e \x0e\t\x00d\x00'),
        (32, b'\x83\x16\x080\x85\x00\x9f\x01\x8c0\x81\x00\x83\x12\x05\x10'),
        (48, b'\x85\x10\x05\x11\x05\x16\x85\x16\x070\x99\x00\xff#\x83\x16'),
        (64, b'\x90\x00\x83\x12 0\x84\x00\x80\x01\x84\n\x84\x1f$('),
        (80, b'\x100\x90\x00| \x83\x16\x0c\x14\x83\x12\x0b\x17\x10\x14'),
        (96, b'\xb0\x01\x8b\x17\x1400\x02\x03\x1c2(\x85\x12\x8b\x13'),
        (112, b'c\x00\x00\x00d\x00\x85\x197(\xb0\x01| \x8b\x17'),
        (128, b'\x85\x197(\x1400\x02\x03\x1c@(\xb1\x01\xb2\x01'),
        (144, b'\x05\x10\x85\x10\x05\x112\x18\x05\x14\xb2\x18\x85\x142\x19'),
        (160, b'\x05\x15\xb0\x01\x0100\x02\x03\x1cR(\x05\x12\xb0\x01'),
        (176, b'\x0500\x02\x03\x1cX(\x05\x16\xb2\n\x0802\x06'),
        (192, b'\x03\x1dH(\xb0\x01\x85\x1dj(\x1400\x02\x03\x1c'),
        (208, b'c(7(\xb1\n\n01\x06\x03\x1dG(\xb0\x01'),
        (224, b'\x85\x1do(\x1400\x02\x03\x1cp(7(d\x00'),
        (240, b'\x0c\x10\xb0\n| \n(\xaf0\x8e\x00<0\x8f\x00'),
        (256, b'\x08\x00'),
        (16384, b'\x00\x00\x00\x00\x07\x00\x0f\x00'),
        (16398, b'L?')
    ]

    assert expected == hex_file_reader.records



